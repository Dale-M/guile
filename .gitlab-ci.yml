image: debian

before_script:
  - dpkg --add-architecture i386
  - apt-get update -qq
  - apt-get install -y
      libc6-dev:amd64 libc6-dev:i386 gcc make
      gcc-aarch64-linux-gnu libc-dev-arm64-cross

x86-64:
  stage: test
  script:
    - make -C tests test-native

i686:
  stage: test
  script:
    - make -C tests test-ia32 CC_IA32='gcc -m32'

aarch64:
  stage: test
  script:
    - make -C tests test-aarch64 CC_AARCH64=gcc-aarch64-linux-gnu
